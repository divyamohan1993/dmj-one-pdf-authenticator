server {
  listen 80;
  server_name signer.dmj.one;

  include /etc/nginx/conf.d/dmj_pdfsigner_port.conf;  # defines $pdfsigner_port

  location /sign { proxy_pass http://127.0.0.1:$pdfsigner_port/sign; }
  location /verify { proxy_pass http://127.0.0.1:$pdfsigner_port/verify; }
  location /spki { proxy_pass http://127.0.0.1:$pdfsigner_port/spki; }

  # restrict to Cloudflare egress IPs if you wish (only Workers/CF hit origin)
  # real_ip_header CF-Connecting-IP;
  # allow ...; deny all;
}
